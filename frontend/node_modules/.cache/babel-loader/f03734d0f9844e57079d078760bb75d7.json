{"ast":null,"code":"import _slicedToArray from \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/Pages/HomePage.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport Posts from '../components/Posts';\nimport Navbar from '../components/NavBar.js';\nvar HomePage = function HomePage() {\n  var navigate = useNavigate();\n  var _useState = useState({\n      user: {},\n      error: \"\"\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    userInfo = _useState2[0],\n    setInfo = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    posts = _useState4[0],\n    setPosts = _useState4[1]; // useEffect(() => {\n  //   console.log('hit');\n  //   let token = localStorage.getItem('token');\n  //   if(token){\n  //     fetch('http://localhost:3000/profile', {\n  //       method: \"GET\",\n  //       headers: {\n  //         \"Authorization\": `Bearer ${token}`\n  //       }\n  //     })\n  //     .then(response => response.json())\n  //     .then(result => {\n  //       if(result.id){\n  //         setInfo({\n  //           ...userInfo, \n  //           user: result\n  //         })\n  //       }\n  //     })\n  //   }\n  // }, []\n  // );\n  useEffect(function () {\n    var url = \"http://localhost:3000/posts\";\n    var token = localStorage.getItem('token');\n    if (token) {\n      fetch(url, {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": \"Bearer \".concat(token)\n        }\n      }).then(function (res) {\n        if (res.ok) {\n          return res.json();\n        }\n        throw new Error(\"Network response was not ok.\");\n      }).then(function (res) {\n        return setPosts(res);\n      }).catch(function () {\n        return navigate(\"/login\");\n      });\n    }\n    // else{\n    //   navigate(\"/login\")\n    // }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Posts, {\n    posts: posts,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }));\n};\nexport default HomePage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Posts","Navbar","HomePage","navigate","user","error","userInfo","setInfo","posts","setPosts","url","token","localStorage","getItem","fetch","method","headers","then","res","ok","json","Error","catch"],"sources":["/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/Pages/HomePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport Posts from '../components/Posts'\nimport Navbar from '../components/NavBar.js'\n\nconst HomePage = () => {\n  let navigate = useNavigate()\n  const [userInfo, setInfo] = useState({\n    user: {}, \n    error: \"\",\n  });\n  const [posts, setPosts] = useState([]);\n\n  // useEffect(() => {\n  //   console.log('hit');\n  //   let token = localStorage.getItem('token');\n  //   if(token){\n  //     fetch('http://localhost:3000/profile', {\n  //       method: \"GET\",\n  //       headers: {\n  //         \"Authorization\": `Bearer ${token}`\n  //       }\n  //     })\n  //     .then(response => response.json())\n  //     .then(result => {\n  //       if(result.id){\n  //         setInfo({\n  //           ...userInfo, \n  //           user: result\n  //         })\n  //       }\n  //     })\n  //   }\n  // }, []\n  // );\n\n  useEffect(() => {\n    const url = \"http://localhost:3000/posts\";\n    let token = localStorage.getItem('token');\n    if(token){\n      fetch(url, {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      })\n        .then((res) => {\n          if (res.ok) {\n            return res.json();\n          }\n          throw new Error(\"Network response was not ok.\");\n        })\n        .then((res) => setPosts(res))\n        .catch(() => navigate(\"/login\"));\n    }\n    // else{\n    //   navigate(\"/login\")\n    // }\n  }, []);\n\n  return (\n    <div>\n      <Navbar/>\n      <Posts posts={posts}/>\n    </div>\n  )\n\n}\n\nexport default HomePage"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,qBAAqB;AACvC,OAAOC,MAAM,MAAM,yBAAyB;AAE5C,IAAMC,QAAQ,GAAG,SAAXA,QAAQ,GAAS;EACrB,IAAIC,QAAQ,GAAGJ,WAAW,EAAE;EAAA,gBACAF,QAAQ,CAAC;MACnCO,IAAI,EAAE,CAAC,CAAC;MACRC,KAAK,EAAE;IACT,CAAC,CAAC;IAAA;IAHKC,QAAQ;IAAEC,OAAO;EAAA,iBAIEV,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/BW,KAAK;IAAEC,QAAQ,kBAEtB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEAX,SAAS,CAAC,YAAM;IACd,IAAMY,GAAG,GAAG,6BAA6B;IACzC,IAAIC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACzC,IAAGF,KAAK,EAAC;MACPG,KAAK,CAACJ,GAAG,EAAE;QACTK,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACP,eAAe,mBAAYL,KAAK;QAClC;MACF,CAAC,CAAC,CACCM,IAAI,CAAC,UAACC,GAAG,EAAK;QACb,IAAIA,GAAG,CAACC,EAAE,EAAE;UACV,OAAOD,GAAG,CAACE,IAAI,EAAE;QACnB;QACA,MAAM,IAAIC,KAAK,CAAC,8BAA8B,CAAC;MACjD,CAAC,CAAC,CACDJ,IAAI,CAAC,UAACC,GAAG;QAAA,OAAKT,QAAQ,CAACS,GAAG,CAAC;MAAA,EAAC,CAC5BI,KAAK,CAAC;QAAA,OAAMnB,QAAQ,CAAC,QAAQ,CAAC;MAAA,EAAC;IACpC;IACA;IACA;IACA;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,MAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAE,eACT,oBAAC,KAAK;IAAC,KAAK,EAAEK,KAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAE,CAClB;AAGV,CAAC;AAED,eAAeN,QAAQ"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/App.js\";\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\nimport SignUp from './components/SignUp';\nimport SignIn from './components/SignIn';\nfunction App() {\n  var _useState = useState({\n      user: {},\n      error: \"\"\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    userInfo = _useState2[0],\n    setInfo = _useState2[1];\n  useEffect(function () {\n    var token = localStorage.getItem('token');\n    if (token) {\n      fetch('http://localhost:3000/profile', {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": \"Bearer \".concat(token)\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (result) {\n        if (result.id) {\n          setInfo(_objectSpread({}, userInfo, {\n            user: result\n          }));\n        }\n      });\n    }\n  });\n  var signUp = function signUp(user) {\n    fetch('http://localhost:3000/users', {\n      method: \"POST\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user: {\n          username: user.username,\n          password: user.password,\n          first_name: user.firstName,\n          last_name: user.lastName\n        }\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (user) {\n      return setInfo(_objectSpread({}, userInfo, {\n        user: user\n      }));\n    });\n  };\n  var signIn = function signIn(user) {\n    fetch(\"http://localhost:3000/login\", {\n      method: \"POST\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user: {\n          username: user.username,\n          password: user.password\n        }\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (result) {\n      if (result.token) {\n        localStorage.setItem('token', result.token);\n        setInfo(_objectSpread({}, userInfo, {\n          user: result.user\n        }));\n      } else {\n        setInfo(_objectSpread({}, userInfo, {\n          error: result.error\n        }));\n      }\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, userInfo['user']['username'] ? /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 39\n    }\n  }, \"Welcome \", userInfo['user']['username']) : /*#__PURE__*/React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SignIn, {\n    signIn: signIn,\n    error: userInfo['error'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(SignUp, {\n    signUp: signUp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  })));\n}\nexport default App;","map":{"version":3,"names":["React","useState","useEffect","SignUp","SignIn","App","user","error","userInfo","setInfo","token","localStorage","getItem","fetch","method","headers","then","response","json","result","id","signUp","body","JSON","stringify","username","password","first_name","firstName","last_name","lastName","signIn","setItem"],"sources":["/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/App.js"],"sourcesContent":["import './App.css';\nimport React, { useState, useEffect } from 'react';\n\nimport SignUp from './components/SignUp';\nimport SignIn from './components/SignIn';\n\nfunction App(){\n  const [userInfo, setInfo] = useState({\n    user: {}, \n    error: \"\",\n  });\n\n  useEffect(() => {\n    let token = localStorage.getItem('token');\n    if(token){\n      fetch('http://localhost:3000/profile', {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      })\n      .then(response => response.json())\n      .then(result => {\n        if(result.id){\n          setInfo({\n            ...userInfo, \n            user: result\n          })\n        }\n      })\n    }\n  }\n  );\n\n  const signUp = user => {\n    fetch('http://localhost:3000/users', {\n      method: \"POST\",\n      headers: {\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user:{\n          username: user.username,\n          password: user.password,\n          first_name: user.firstName,\n          last_name: user.lastName\n        }\n      })\n    })\n    .then(response => response.json())\n    .then(user => setInfo({ ...userInfo, user: user }) )\n  }\n\n  const signIn = (user) => {\n    fetch(\"http://localhost:3000/login\", {\n        method: \"POST\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            user: {\n                username: user.username,\n                password: user.password\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(result => {\n        if (result.token){\n        localStorage.setItem('token', result.token);\n        setInfo({\n            ...userInfo,\n            user: result.user\n            });\n        }\n        else {\n            setInfo({\n              ...userInfo,\n              error: result.error\n            });\n        }\n    })\n  }\n\n  return (\n    <div className=\"App\">\n      {userInfo['user']['username'] ? <h2>Welcome {userInfo['user']['username']}</h2> : (\n        <>\n        <SignIn signIn={signIn} error={userInfo['error']} />\n        <SignUp signUp={signUp} />\n        </>)\n      }\n    </div>\n  );\n} \n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
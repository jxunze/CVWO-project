{"ast":null,"code":"import _objectSpread from \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\nimport { Navigate, useNavigate } from \"react-router-dom\";\nimport Posts from '../components/Posts';\nimport Navbar from '../components/NavBar';\nvar HomePage = function HomePage() {\n  var _useState = useState({\n      user: {},\n      error: \"\"\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    userInfo = _useState2[0],\n    setInfo = _useState2[1];\n  useEffect(function () {\n    var token = localStorage.getItem('token');\n    if (token) {\n      fetch('http://localhost:3000/profile', {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": \"Bearer \".concat(token)\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (result) {\n        if (result.id) {\n          setInfo(_objectSpread({}, userInfo, {\n            user: result\n          }));\n        }\n      });\n    }\n  }, []);\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    posts = _useState4[0],\n    setPosts = _useState4[1];\n  useEffect(function () {\n    var url = \"/api/v1/posts/index\";\n    fetch(url).then(function (res) {\n      if (res.ok) {\n        return res.json();\n      }\n      throw new Error(\"Network response was not ok.\");\n    }).then(function (res) {\n      return setPosts(res);\n    }).catch(function () {\n      return navigate(\"/\");\n    });\n  }, []);\n};\nexport default HomePage;","map":{"version":3,"names":["React","useState","useEffect","Navigate","useNavigate","Posts","Navbar","HomePage","user","error","userInfo","setInfo","token","localStorage","getItem","fetch","method","headers","then","response","json","result","id","posts","setPosts","url","res","ok","Error","catch","navigate"],"sources":["/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/Pages/HomePage.js"],"sourcesContent":["import './App.css';\nimport React, { useState, useEffect } from 'react';\nimport { Navigate, useNavigate } from \"react-router-dom\";\nimport Posts from '../components/Posts'\nimport Navbar from '../components/NavBar'\n\nconst HomePage = () => {\n  const [userInfo, setInfo] = useState({\n    user: {}, \n    error: \"\",\n  });\n\n  useEffect(() => {\n    let token = localStorage.getItem('token');\n\n    if(token){\n      fetch('http://localhost:3000/profile', {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      })\n      .then(response => response.json())\n      .then(result => {\n        if(result.id){\n          setInfo({\n            ...userInfo, \n            user: result\n          })\n        }\n      })\n    }\n  }, []\n  );\n\n  const [posts, setPosts] = useState([]);\n  useEffect(() => {\n      const url = \"/api/v1/posts/index\";\n      fetch(url)\n        .then((res) => {\n          if (res.ok) {\n            return res.json();\n          }\n          throw new Error(\"Network response was not ok.\");\n        })\n        .then((res) => setPosts(res))\n        .catch(() => navigate(\"/\"));\n    }, []);\n\n}\n\nexport default HomePage"],"mappings":";;AAAA,OAAO,WAAW;AAClB,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,OAAOC,KAAK,MAAM,qBAAqB;AACvC,OAAOC,MAAM,MAAM,sBAAsB;AAEzC,IAAMC,QAAQ,GAAG,SAAXA,QAAQ,GAAS;EAAA,gBACON,QAAQ,CAAC;MACnCO,IAAI,EAAE,CAAC,CAAC;MACRC,KAAK,EAAE;IACT,CAAC,CAAC;IAAA;IAHKC,QAAQ;IAAEC,OAAO;EAKxBT,SAAS,CAAC,YAAM;IACd,IAAIU,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAEzC,IAAGF,KAAK,EAAC;MACPG,KAAK,CAAC,+BAA+B,EAAE;QACrCC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACP,eAAe,mBAAYL,KAAK;QAClC;MACF,CAAC,CAAC,CACDM,IAAI,CAAC,UAAAC,QAAQ;QAAA,OAAIA,QAAQ,CAACC,IAAI,EAAE;MAAA,EAAC,CACjCF,IAAI,CAAC,UAAAG,MAAM,EAAI;QACd,IAAGA,MAAM,CAACC,EAAE,EAAC;UACXX,OAAO,mBACFD,QAAQ;YACXF,IAAI,EAAEa;UAAM,GACZ;QACJ;MACF,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,EAAE,CACJ;EAAC,iBAEwBpB,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/BsB,KAAK;IAAEC,QAAQ;EACtBtB,SAAS,CAAC,YAAM;IACZ,IAAMuB,GAAG,GAAG,qBAAqB;IACjCV,KAAK,CAACU,GAAG,CAAC,CACPP,IAAI,CAAC,UAACQ,GAAG,EAAK;MACb,IAAIA,GAAG,CAACC,EAAE,EAAE;QACV,OAAOD,GAAG,CAACN,IAAI,EAAE;MACnB;MACA,MAAM,IAAIQ,KAAK,CAAC,8BAA8B,CAAC;IACjD,CAAC,CAAC,CACDV,IAAI,CAAC,UAACQ,GAAG;MAAA,OAAKF,QAAQ,CAACE,GAAG,CAAC;IAAA,EAAC,CAC5BG,KAAK,CAAC;MAAA,OAAMC,QAAQ,CAAC,GAAG,CAAC;IAAA,EAAC;EAC/B,CAAC,EAAE,EAAE,CAAC;AAEV,CAAC;AAED,eAAevB,QAAQ"},"metadata":{},"sourceType":"module"}
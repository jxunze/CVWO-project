{"ast":null,"code":"import _slicedToArray from \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/components/NewComment.js\";\nimport React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nvar NewComment = function NewComment(id) {\n  var navigate = useNavigate();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    name = _useState2[0],\n    setName = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    body = _useState4[0],\n    setBody = _useState4[1];\n  var stripHtmlEntities = function stripHtmlEntities(str) {\n    return String(str).replace(/\\n/g, \"<br> <br>\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n  };\n  var _onChange = function onChange(event, setFunction) {\n    setFunction(event.target.value);\n  };\n  var onSubmit = function onSubmit(event) {\n    event.preventDefault();\n    var url = \"http://localhost:3000/comments\";\n    if (body.length == 0) return;\n    var info = {\n      comment: {\n        post_id: 2,\n        user_id: 1,\n        body: stripHtmlEntities(body)\n      }\n    };\n    var token = localStorage.getItem('token');\n    if (token) {\n      fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Authorization\": \"Bearer \".concat(token)\n        },\n        body: JSON.stringify(info)\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw new Error(\"Network response was not ok.\");\n      }).then(function () {\n        return window.location.reload(false);\n      }).catch(function (error) {\n        return console.log(error.message);\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-lg-6 offset-lg-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"font-weight-normal mb-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, \"Write a comment...\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    id: \"name\",\n    className: \"form-control\",\n    required: true,\n    onChange: function onChange(event) {\n      return _onChange(event, setName);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, \"Body\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control\",\n    id: \"body\",\n    name: \"body\",\n    type: \"text\",\n    required: true,\n    onChange: function onChange(event) {\n      return _onChange(event, setBody);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn custom-button mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, \"Comment\")))));\n};\nexport default NewComment;","map":{"version":3,"names":["React","useState","Link","useNavigate","NewComment","id","navigate","name","setName","body","setBody","stripHtmlEntities","str","String","replace","onChange","event","setFunction","target","value","onSubmit","preventDefault","url","length","info","comment","post_id","user_id","token","localStorage","getItem","fetch","method","headers","JSON","stringify","then","response","ok","json","Error","window","location","reload","catch","error","console","log","message"],"sources":["/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/components/NewComment.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\nconst NewComment = (id) => {\n  const navigate = useNavigate();\n  const [name, setName] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n\n  const stripHtmlEntities = (str) => {\n    return String(str)\n      .replace(/\\n/g, \"<br> <br>\")\n      .replace(/</g, \"&lt;\")\n      .replace(/>/g, \"&gt;\");\n  };\n\n  const onChange = (event, setFunction) => {\n    setFunction(event.target.value);\n  };\n\n  const onSubmit = (event) => {\n    event.preventDefault();\n    const url = `http://localhost:3000/comments`;\n\n    if (body.length == 0)\n      return;\n    \n    const info = {\n      comment: {\n        post_id: 2,\n        user_id: 1,\n        body: stripHtmlEntities(body),\n      }\n    };\n    \n    let token = localStorage.getItem('token');\n    if (token){\n      fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        },\n        body: JSON.stringify(info),\n      })\n        .then((response) => {\n          if (response.ok) {\n            return response.json();\n          }\n          throw new Error(\"Network response was not ok.\");\n        })\n        .then(()=>window.location.reload(false))\n        .catch((error) => console.log(error.message));\n      }\n  };\n  \n\n  return (\n    <div className=\"container mt-5\">\n      <div className=\"row\">\n        <div className=\"col-sm-12 col-lg-6 offset-lg-3\">\n          <h1 className=\"font-weight-normal mb-5\">\n            Write a comment...\n          </h1>\n          <form onSubmit={onSubmit}>\n            <div className=\"form-group\">\n              <label htmlFor=\"name\">Name</label>\n              <input\n                type=\"text\"\n                name=\"name\"\n                id=\"name\"\n                className=\"form-control\"\n                required\n                onChange={(event) => onChange(event, setName)}\n              />\n            </div>\n            <label htmlFor=\"body\">Body</label>\n            <textarea\n              className=\"form-control\"\n              id=\"body\"\n              name=\"body\"\n              type=\"text\"\n              required\n              onChange={(event) => onChange(event, setBody)}\n            />\n            <button type=\"submit\" className=\"btn custom-button mt-3\">\n              Comment\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default NewComment;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
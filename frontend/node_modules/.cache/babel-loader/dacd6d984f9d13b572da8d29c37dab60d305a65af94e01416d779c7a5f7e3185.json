{"ast":null,"code":"var _jsxFileName = \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/App.js\";\nimport './App.css';\nimport { Component } from 'react';\nimport SignUp from './components/SignUp';\nimport SignIn from './components/SignIn';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass App extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      user: {},\n      error: \"\"\n    };\n    this.signUp = user => {\n      fetch('http://localhost:3000/users', {\n        method: \"POST\",\n        headers: {\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          user: {\n            username: user.username,\n            password: user.password,\n            first_name: user.firstName,\n            last_name: user.lastName\n          }\n        })\n      }).then(response => response.json()).then(user => this.setState({\n        user: user\n      }));\n    };\n    this.signIn = user => {\n      fetch(\"http://localhost:3000/login\", {\n        method: \"POST\",\n        headers: {\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          user: {\n            username: user.username,\n            password: user.password\n          }\n        })\n      }).then(response => response.json()).then(result => {\n        if (result.token) {\n          localStorage.setItem('token', result.token);\n          this.setState({\n            user: result.user\n          });\n        } else {\n          this.setState({\n            error: result.error\n          });\n        }\n      });\n    };\n  }\n  componentDidMount() {\n    let token = localStorage.getItem('token');\n    if (token) {\n      fetch('http://localhost:3000/profile', {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      }).then(response => response.json()).then(result => {\n        if (result.id) {\n          this.setState({\n            user: result\n          });\n        }\n      });\n    }\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: this.state.user.username ? /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Welcome \", this.state.user.first_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 37\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(SignIn, {\n          signIn: this.signIn,\n          error: this.state.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SignUp, {\n          signUp: this.signUp\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["Component","SignUp","SignIn","App","state","user","error","signUp","fetch","method","headers","body","JSON","stringify","username","password","first_name","firstName","last_name","lastName","then","response","json","setState","signIn","result","token","localStorage","setItem","componentDidMount","getItem","id","render"],"sources":["/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/App.js"],"sourcesContent":["import './App.css';\nimport { Component } from 'react';\n\nimport SignUp from './components/SignUp';\nimport SignIn from './components/SignIn';\n\nclass App extends Component {\n\n  state = {\n    user: {}, \n    error: \"\",\n  }\n\n  componentDidMount(){\n    let token = localStorage.getItem('token')\n    if(token){\n      fetch('http://localhost:3000/profile', {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      })\n      .then(response => response.json())\n      .then(result => {\n        if(result.id){\n          this.setState({\n            user: result\n          })\n        }\n      })\n    }\n  }\n\n  signUp = user => {\n    fetch('http://localhost:3000/users', {\n      method: \"POST\",\n      headers: {\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user:{\n          username: user.username,\n          password: user.password,\n          first_name: user.firstName,\n          last_name: user.lastName\n        }\n      })\n    })\n    .then(response => response.json())\n    .then(user => this.setState({ user: user }) )\n  }\n\n  signIn = (user) => {\n    fetch(\"http://localhost:3000/login\", {\n        method: \"POST\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            user: {\n                username: user.username,\n                password: user.password\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(result => {\n        if (result.token){\n        localStorage.setItem('token', result.token)\n        this.setState({\n            user: result.user\n            })\n        }\n        else {\n            this.setState({\n                error: result.error\n            })\n        }\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        {this.state.user.username ? <h2>Welcome {this.state.user.first_name}</h2> : (\n          <>\n          <SignIn signIn={this.signIn} error={this.state.error} />\n          <SignUp signUp={this.signUp} />\n          </>)\n        }\n      </div>\n    );\n  } \n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/Pages/SignupPage.js\";\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link } from \"react-router-dom\";\nimport SignUp from '../components/SignUp';\nvar SignupPage = function SignupPage() {\n  var _useState = useState({\n      user: {},\n      error: \"\"\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    userInfo = _useState2[0],\n    setInfo = _useState2[1];\n  useEffect(function () {\n    console.log('hit');\n    var token = localStorage.getItem('token');\n    if (token) {\n      fetch('http://localhost:3000/profile', {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": \"Bearer \".concat(token)\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (result) {\n        if (result.id) {\n          setInfo(_objectSpread({}, userInfo, {\n            user: result\n          }));\n          Navigate(\"/home\");\n        }\n      });\n    }\n  }, []);\n  var signUp = function signUp(user) {\n    fetch('http://localhost:3000/users', {\n      method: \"POST\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user: {\n          username: user.username,\n          password: user.password,\n          first_name: user.firstName,\n          last_name: user.lastName\n        }\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (user) {\n      return setInfo(_objectSpread({}, userInfo, {\n        user: user\n      }));\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(SignUp, {\n    signUp: signUp,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }));\n};\nexport default SignupPage;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Link","SignUp","SignupPage","user","error","userInfo","setInfo","console","log","token","localStorage","getItem","fetch","method","headers","then","response","json","result","id","Navigate","signUp","body","JSON","stringify","username","password","first_name","firstName","last_name","lastName"],"sources":["/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/Pages/SignupPage.js"],"sourcesContent":["import './App.css';\nimport React, { useState, useEffect } from 'react';\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route, \n  Link\n} from \"react-router-dom\";\n\nimport SignUp from '../components/SignUp';\n\nconst SignupPage = () => {\n  const [userInfo, setInfo] = useState({\n    user: {}, \n    error: \"\",\n  });\n\n  useEffect(() => {\n    console.log('hit');\n    let token = localStorage.getItem('token');\n    if(token){\n      fetch('http://localhost:3000/profile', {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      })\n      .then(response => response.json())\n      .then(result => {\n        if(result.id){\n          setInfo({\n            ...userInfo, \n            user: result\n          });\n          Navigate(\"/home\")\n        }\n      })\n    }\n  }, []\n  );\n\n  const signUp = user => {\n    fetch('http://localhost:3000/users', {\n      method: \"POST\",\n      headers: {\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user:{\n          username: user.username,\n          password: user.password,\n          first_name: user.firstName,\n          last_name: user.lastName\n        }\n      })\n    })\n    .then(response => response.json())\n    .then(user => setInfo({ ...userInfo, user: user }) )\n  }\n\n  return (\n    <div className=\"App\">\n      {\n        <SignUp signUp={signUp} />\n      }\n    </div>\n  );\n} \n\nexport default SignupPage;"],"mappings":";;;;AAAA,OAAO,WAAW;AAClB,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SACEC,aAAa,IAAIC,MAAM,EACvBC,MAAM,EACNC,KAAK,EACLC,IAAI,QACC,kBAAkB;AAEzB,OAAOC,MAAM,MAAM,sBAAsB;AAEzC,IAAMC,UAAU,GAAG,SAAbA,UAAU,GAAS;EAAA,gBACKR,QAAQ,CAAC;MACnCS,IAAI,EAAE,CAAC,CAAC;MACRC,KAAK,EAAE;IACT,CAAC,CAAC;IAAA;IAHKC,QAAQ;IAAEC,OAAO;EAKxBX,SAAS,CAAC,YAAM;IACdY,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;IAClB,IAAIC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACzC,IAAGF,KAAK,EAAC;MACPG,KAAK,CAAC,+BAA+B,EAAE;QACrCC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACP,eAAe,mBAAYL,KAAK;QAClC;MACF,CAAC,CAAC,CACDM,IAAI,CAAC,UAAAC,QAAQ;QAAA,OAAIA,QAAQ,CAACC,IAAI,EAAE;MAAA,EAAC,CACjCF,IAAI,CAAC,UAAAG,MAAM,EAAI;QACd,IAAGA,MAAM,CAACC,EAAE,EAAC;UACXb,OAAO,mBACFD,QAAQ;YACXF,IAAI,EAAEe;UAAM,GACZ;UACFE,QAAQ,CAAC,OAAO,CAAC;QACnB;MACF,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,EAAE,CACJ;EAED,IAAMC,MAAM,GAAG,SAATA,MAAM,CAAGlB,IAAI,EAAI;IACrBS,KAAK,CAAC,6BAA6B,EAAE;MACnCC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,QAAQ,EAAE,kBAAkB;QAC5B,cAAc,EAAE;MACpB,CAAC;MACDQ,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBrB,IAAI,EAAC;UACHsB,QAAQ,EAAEtB,IAAI,CAACsB,QAAQ;UACvBC,QAAQ,EAAEvB,IAAI,CAACuB,QAAQ;UACvBC,UAAU,EAAExB,IAAI,CAACyB,SAAS;UAC1BC,SAAS,EAAE1B,IAAI,CAAC2B;QAClB;MACF,CAAC;IACH,CAAC,CAAC,CACDf,IAAI,CAAC,UAAAC,QAAQ;MAAA,OAAIA,QAAQ,CAACC,IAAI,EAAE;IAAA,EAAC,CACjCF,IAAI,CAAC,UAAAZ,IAAI;MAAA,OAAIG,OAAO,mBAAMD,QAAQ;QAAEF,IAAI,EAAEA;MAAI,GAAG;IAAA,EAAE;EACtD,CAAC;EAED,oBACE;IAAK,SAAS,EAAC,KAAK;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAEhB,oBAAC,MAAM;IAAC,MAAM,EAAEkB,MAAO;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,CAExB;AAEV,CAAC;AAED,eAAenB,UAAU"},"metadata":{},"sourceType":"module"}
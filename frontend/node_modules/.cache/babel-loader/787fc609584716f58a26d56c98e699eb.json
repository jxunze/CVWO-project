{"ast":null,"code":"import _slicedToArray from \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/components/NewPost.js\";\nimport React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport FloatingLabel from 'react-bootstrap/FloatingLabel';\nimport Container from \"react-bootstrap/esm/Container\";\nvar NewPost = function NewPost() {\n  var navigate = useNavigate();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    title = _useState2[0],\n    setTitle = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    body = _useState4[0],\n    setBody = _useState4[1];\n  var stripHtmlEntities = function stripHtmlEntities(str) {\n    return String(str).replace(/\\n/g, \"<br> <br>\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n  };\n  var _onChange = function onChange(event, setFunction) {\n    setFunction(event.target.value);\n  };\n  var onSubmit = function onSubmit(event) {\n    event.preventDefault();\n    var url = \"http://localhost:3000/posts\";\n    if (title.length == 0 || body.length == 0) return;\n    var info = {\n      post: {\n        title: title,\n        body: stripHtmlEntities(body)\n      }\n    };\n    console.log(JSON.stringify(info));\n    var auth_token = localStorage.getItem('token');\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \".concat(auth_token)\n      },\n      body: JSON.stringify(info)\n    }).then(function (response) {\n      if (response.ok) {\n        return response.json();\n      }\n      throw new Error(\"Network response was not ok.\");\n    }).then(function () {\n      return window.location.reload(false);\n    }).catch(function (error) {\n      return console.log(error.message);\n    });\n    console.log(\"3\");\n  };\n  return (\n    /*#__PURE__*/\n    // <Form onSubmit={onSubmit}>\n    //   <Form.Label>What's on your mind?</Form.Label>\n    // <FloatingLabel\n    //   controlId=\"floatingTextarea\"\n    //   label=\"Title\"\n    //   className=\"mb-1 text-center\"\n    // >\n    //   <Form.Control \n    //       as=\"textarea\" \n    //       style={{ height: '70px'}}\n    //       placeholder=\"Title\" \n    //       type=\"string\"\n    //       name=\"title\"\n    //       id=\"title\"\n    //       className=\"form-control\"\n    //       required\n    //       onChange={(event) => onChange(event, setTitle)}/>\n    // </FloatingLabel>\n    // <FloatingLabel controlId=\"floatingTextarea2\" label=\"Body\">\n    //   <Form.Control\n    //     as=\"textarea\"\n    //     placeholder=\"Body\"\n    //     style={{ height: '100px'}}\n    //     id=\"body\"\n    //     name=\"body\"\n    //     required\n    //     onChange={(event) => onChange(event, setBody)}\n    //   />\n    // </FloatingLabel>\n    //   <Button type=\"submit\" className=\"btn mt-2\" variant=\"light\" disabled={!(title && body)}>\n    //     Post\n    //   </Button>\n    // </Form>\n    React.createElement(\"div\", {\n      class: \"container\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: onSubmit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }, \"What's on your mind?\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-floating\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"title\",\n      id: \"title\",\n      className: \"form-control\",\n      required: true,\n      onChange: function onChange(event) {\n        return _onChange(event, setTitle);\n      },\n      placeholder: \"Title\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"title\",\n      class: \"form-label\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, \"Title\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-floating\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"body\",\n      id: \"body\",\n      className: \"form-control\",\n      required: true,\n      onChange: function onChange(event) {\n        return _onChange(event, setBody);\n      },\n      placeholder: \"\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"body\",\n      class: \"form-label\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, \"Body\")), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      className: \"btn mt-2\",\n      variant: \"light\",\n      disabled: !(title && body),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }, \"Post\")))\n  );\n};\nexport default NewPost;","map":{"version":3,"names":["React","useState","Link","useNavigate","Button","Form","FloatingLabel","Container","NewPost","navigate","title","setTitle","body","setBody","stripHtmlEntities","str","String","replace","onChange","event","setFunction","target","value","onSubmit","preventDefault","url","length","info","post","console","log","JSON","stringify","auth_token","localStorage","getItem","fetch","method","headers","then","response","ok","json","Error","window","location","reload","catch","error","message"],"sources":["/Users/xunze/Local Documents/Grind/Personal Projects/CVWO/proj2/final_forum/frontend/src/components/NewPost.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport FloatingLabel from 'react-bootstrap/FloatingLabel';\nimport Container from \"react-bootstrap/esm/Container\";\n\nconst NewPost = () => {\n  const navigate = useNavigate();\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n\n  const stripHtmlEntities = (str) => {\n    return String(str)\n      .replace(/\\n/g, \"<br> <br>\")\n      .replace(/</g, \"&lt;\")\n      .replace(/>/g, \"&gt;\");\n  };\n\n  const onChange = (event, setFunction) => {\n    setFunction(event.target.value);\n  };\n\n  const onSubmit = (event) => {\n    event.preventDefault();\n    const url = \"http://localhost:3000/posts\";\n\n    if (title.length == 0 || body.length == 0)\n      return;\n    const info = {\n      post: {\n        title,\n        body: stripHtmlEntities(body),\n      }\n    };\n    \n    console.log(JSON.stringify(info))\n    const auth_token = localStorage.getItem('token');\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${auth_token}`\n      },\n      body: JSON.stringify(info),\n    })\n      .then((response) => {\n        if (response.ok) {\n          return response.json();\n        }\n        throw new Error(\"Network response was not ok.\");\n      })\n      .then(()=>window.location.reload(false))\n      .catch((error) => console.log(error.message));\n      console.log(\"3\")\n  };\n  \n\n  return (\n          // <Form onSubmit={onSubmit}>\n          //   <Form.Label>What's on your mind?</Form.Label>\n          // <FloatingLabel\n          //   controlId=\"floatingTextarea\"\n          //   label=\"Title\"\n          //   className=\"mb-1 text-center\"\n          // >\n          //   <Form.Control \n          //       as=\"textarea\" \n          //       style={{ height: '70px'}}\n          //       placeholder=\"Title\" \n          //       type=\"string\"\n          //       name=\"title\"\n          //       id=\"title\"\n          //       className=\"form-control\"\n          //       required\n          //       onChange={(event) => onChange(event, setTitle)}/>\n          // </FloatingLabel>\n          // <FloatingLabel controlId=\"floatingTextarea2\" label=\"Body\">\n          //   <Form.Control\n          //     as=\"textarea\"\n          //     placeholder=\"Body\"\n          //     style={{ height: '100px'}}\n          //     id=\"body\"\n          //     name=\"body\"\n          //     required\n          //     onChange={(event) => onChange(event, setBody)}\n          //   />\n          // </FloatingLabel>\n          //   <Button type=\"submit\" className=\"btn mt-2\" variant=\"light\" disabled={!(title && body)}>\n          //     Post\n          //   </Button>\n          // </Form>\n          <div class=\"container\">\n            <form onSubmit={onSubmit}>\n              <label className=\"\">What's on your mind?</label>\n              <div className=\"form-floating\">\n                <input type=\"title\" \n                        id=\"title\" \n                        className=\"form-control\" \n                        required \n                        onChange={(event) => onChange(event, setTitle)}\n                        placeholder=\"Title\"/>\n                <label for=\"title\" class=\"form-label\">Title</label>\n              </div>\n              <div className=\"form-floating\">\n                <input type=\"body\" \n                        id=\"body\" \n                        className=\"form-control\" \n                        required \n                        onChange={(event) => onChange(event, setBody)}\n                        placeholder=\"\"/>\n                <label for=\"body\" class=\"form-label\">Body</label>\n              </div>\n              <Button type=\"submit\" className=\"btn mt-2\" variant=\"light\" disabled={!(title && body)}>\n               Post\n              </Button>\n            </form>\n          </div>\n  );\n};\n\nexport default NewPost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}